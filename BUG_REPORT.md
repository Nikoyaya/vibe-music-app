# Bug Issue Table

## 项目信息
- **项目名称**: Vibe Music App
- **版本**: 0.1.0
- **开发环境**: Flutter
- **目标平台**: Android, iOS, Web

## 问题报告模板

### 🐛 新问题报告

**问题标题**: [简短描述问题]

**问题类型**: 
- [ ] 功能问题
- [ ] UI/UX 问题
- [ ] 性能问题
- [ ] 崩溃/错误
- [ ] 其他

**影响范围**: 
- [ ] 单模块
- [ ] 跨模块
- [ ] 整个应用

**严重程度**: 
- [ ] 低 (不影响主要功能)
- [ ] 中 (影响部分功能)
- [ ] 高 (影响核心功能)
- [ ] 紧急 (应用无法使用)

**复现步骤**:
1. 
2. 
3. 

**预期行为**:

**实际行为**:

**环境信息**:
- 设备: 
- 操作系统: 
- Flutter 版本: 
- 应用版本: 

**截图/日志**:

**相关文件**:

## 已知问题

| 编号 | 问题描述 | 严重程度 | 状态 | 报告日期 | 解决日期 | 相关文件 |
|------|---------|---------|------|----------|----------|----------|
| #1 | 第二次启动应用时，上次播放的歌曲时长显示为0 | 中 | 已解决 | 2026-01-23 | 2026-01-23 | lib/src/providers/music_provider.dart |
| #2 | 播放列表删除歌曲后UI不更新 | 中 | 已解决 | 2026-01-23 | 2026-01-23 | lib/src/pages/player/widgets/controller.dart |
| #3 | 应用启动时卡在启动页 | 高 | 已解决 | 2026-01-23 | 2026-01-23 | lib/src/main.dart |
| #4 | 浮层播放组件在播放页未隐藏 | 低 | 已解决 | 2026-01-23 | 2026-01-23 | lib/src/pages/home/widgets/view.dart |
| #5 | 网络请求超时错误 | 中 | 待解决 | 2026-01-23 | - | lib/src/services/api_service.dart |

## 历史问题

### 已解决

#### 问题 #1: 第二次启动应用时，上次播放的歌曲时长显示为0
- **描述**: 应用第二次启动时，虽然能正确显示上次播放的歌曲信息（封面、歌名、歌手名），但时长显示为0，且无法播放
- **原因**: 音频播放器未在应用启动时初始化音频源，只是恢复了播放列表状态
- **解决方案**: 在 `_loadPlayState` 方法中添加音频播放器初始化逻辑，设置音频源但不自动播放
- **相关文件**: lib/src/providers/music_provider.dart
- **解决日期**: 2026-01-23

#### 问题 #2: 播放列表删除歌曲后UI不更新
- **描述**: 在播放页删除歌曲后，数据库中的播放列表已更新，但UI上歌曲仍然显示
- **原因**: 播放列表使用了同一个列表对象，UI未检测到变化
- **解决方案**: 在 `_updateObservableVariables` 方法中创建播放列表的副本
- **相关文件**: lib/src/pages/player/widgets/controller.dart
- **解决日期**: 2026-01-23

#### 问题 #3: 应用启动时卡在启动页
- **描述**: 应用启动后一直停留在启动页，无法进入主界面
- **原因**: 日志工具在初始化前被调用，导致 LateInitializationError
- **解决方案**: 调整初始化顺序，先初始化日志工具再使用
- **相关文件**: lib/src/main.dart
- **解决日期**: 2026-01-23

#### 问题 #4: 浮层播放组件在播放页未隐藏
- **描述**: 进入播放页后，底部的浮层播放组件仍然显示，造成UI冗余
- **解决方案**: 在各布局中添加条件判断，当显示播放页时隐藏浮层组件
- **相关文件**: lib/src/pages/home/widgets/view.dart
- **解决日期**: 2026-01-23

## 性能问题

| 编号 | 问题描述 | 严重程度 | 状态 | 报告日期 | 解决日期 | 相关文件 |
|------|---------|---------|------|----------|----------|----------|
| #P1 | 首次加载歌曲列表时卡顿 | 中 | 待优化 | 2026-01-23 | - | lib/src/pages/home/components/song_list_page.dart |
| #P2 | 播放列表较长时滚动不流畅 | 低 | 待优化 | 2026-01-23 | - | lib/src/pages/player/components/player_playlist.dart |

## UI/UX 问题

| 编号 | 问题描述 | 严重程度 | 状态 | 报告日期 | 解决日期 | 相关文件 |
|------|---------|---------|------|----------|----------|----------|
| #UI1 | 小屏幕设备上歌曲信息显示不全 | 低 | 待优化 | 2026-01-23 | - | lib/src/pages/home/components/song_list_page.dart |
| #UI2 | 播放控制按钮在某些设备上响应区域过小 | 低 | 待优化 | 2026-01-23 | - | lib/src/pages/player/components/player_controls.dart |

## 监控与预防

### 日志监控
- 应用使用 `AppLogger` 进行日志记录
- 关键操作和错误均有详细日志
- 日志等级分为：debug, info, error

### 错误处理
- 网络请求错误已处理
- 本地数据库错误已处理
- 播放器错误已处理

### 性能监控
- 应用启动时间监控
- 关键操作耗时监控

## 贡献指南

### 如何报告问题
1. 查看**已知问题**列表，确认问题未被报告
2. 使用**新问题报告**模板填写详细信息
3. 提供必要的截图、日志和复现步骤
4. 分配适当的严重程度

### 如何修复问题
1. 从已知问题列表中选择未解决的问题
2. 在本地环境复现问题
3. 分析问题原因
4. 实现修复方案
5. 测试修复效果
6. 更新问题状态和解决方案

## 维护者

- **主要维护者**: 开发团队
- **联系方式**: [团队邮箱]

---

*最后更新时间: 2026-01-23*
